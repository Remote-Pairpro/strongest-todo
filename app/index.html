<!DOCTYPE HTML>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Strongest TODO</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script type='text/javascript' src="js/bootstrap.min.js"></script>

</head>

<body>

    <header class="container text-center">
        <h1 class="text-center">俺達が考える最強のTODOアプリ！</h1>
    </header>

    <section class="container text-center">
        <form class="form-inline">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Enter TODO" data-bind="value: newContent, valueUpdate: 'afterkeydown'" />
                <button type="button text-center" class="btn btn-primary-outline btn-sm" data-bind='click: addTodo, enable: existNewContent()'>追加</button>
                <div class="checkbox">
                    <label><input type="checkbox" data-bind="checked: hideDoneTasks ">Doneのものを表示しない</label>
                </div>
            </div>
        </form>
    </section>

    <section class="container text-center">

        <div class="panel panel-default ">
            <div class="row">
                <div class="col-xs-2">
                    Done
                </div>
                <div class="col-xs-8">
                    内容
                </div>
                <div class="col-xs-2">
                    削除
                </div>
            </div>

            <div data-bind='template: {
                                foreach: filterdTodoList,
                                beforeRemove: beforeRemoveEvent,
                                afterAdd: afterAddEvent
            }'>
                <div id= "" class="row" draggable="true" dropzone="move">
                    <div class="col-xs-2">
                        <input type="checkbox" data-bind="checked: done, click: $parent.celebration" />
                    </div>
                    <div class="col-xs-8 text-left">
                        <span data-bind="text: content, style:{textDecoration: done() ? 'line-through':'none'}"></span>
                    </div>
                    <div class="col-xs-2">
                        <a href='#' data-bind="click: $parent.removeTodo">
                                    <i class="glyphicon glyphicon-remove-circle"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </section>

    <footer class="container text-center ">
        Strongest TODO Ver. <span data-bind="text: appVersion "></span>
    </footer>

    <script type='text/javascript' src='js/app.js'></script>
    
    <script type='text/javascript'>
function handleDragStart(e) {
    // 重要なのはこのイベントと…
    console.log('dragStart');
    
    // Target (this) element is the source node.
    // なんかアイテムをセット

    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/html', "テスト");
    console.log(e);
}

function handleDragOver(e) {
//    console.log('dragOver');
    e.preventDefault();
}

function handleDragEnter(e) {
//    console.log('dragEnter');
    e.preventDefault();
}

function handleDragLeave(e) {
//    console.log('dragLeave');
//    console.log(e);
    e.preventDefault();
}

function handleDrop(e) {
    // 重要なのはこのイベントだけなんだが…。
    // このイベントだけがおこらないので話にならない。
    console.log('drop');
    console.log(e);
}

function handleDragEnd(e) {
    console.log('DragEnd');
    console.log(e);
}

var cols = document.querySelectorAll('.row');
[].forEach.call(cols, function(col) {
  col.addEventListener('dragstart', handleDragStart, false);
  col.addEventListener('dragenter', handleDragEnter, false);
  col.addEventListener('dragover', handleDragOver, false);
  col.addEventListener('dragleave', handleDragLeave, false);
  col.addEventListener('drop', handleDrop, false);
  col.addEventListener('dragend', handleDragEnd, false);
});
    </script>

    <style>
      #celebrationPanel {
        position:absolute;
        left:50%;
        top:20%;
        margin-left:-150px;
        display:none;
      }
    </style>

    <div id="celebrationPanel"><img src="image/panpakapan.gif"></div>

</body>

</html>